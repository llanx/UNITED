---
phase: 01-foundation
plan: 05
type: execute
wave: 2
depends_on: [01-04]
files_modified:
  - client/src/renderer/index.html
  - client/src/renderer/src/App.tsx
  - client/src/renderer/src/stores/auth.ts
  - client/src/renderer/src/stores/connection.ts
  - client/src/renderer/src/stores/server.ts
  - client/src/renderer/src/stores/channels.ts
  - client/src/renderer/src/stores/settings.ts
  - client/src/renderer/src/stores/ui.ts
  - client/src/renderer/src/stores/index.ts
  - client/src/renderer/src/pages/Welcome.tsx
  - client/src/renderer/src/pages/Main.tsx
  - client/src/renderer/src/components/ServerRail.tsx
  - client/src/renderer/src/components/ChannelSidebar.tsx
  - client/src/renderer/src/components/MainContent.tsx
  - client/src/renderer/src/components/ConnectionDot.tsx
  - client/src/renderer/src/components/ServerIcon.tsx
  - client/src/renderer/src/components/SkeletonShimmer.tsx
autonomous: true
requirements: [APP-01]

must_haves:
  truths:
    - "Triple-column Discord-style layout renders correctly at 1280x720 and above"
    - "Cached state from SQLite loads instantly on subsequent launches without spinner"
    - "Connection status dot is always visible and reflects WebSocket state (green/yellow/red)"
    - "Welcome screen shows on first launch with Create and Recover identity buttons"
    - "Server icon shows letter initials from server name (max 3 chars) in colored circle"
  artifacts:
    - path: "client/src/renderer/src/App.tsx"
      provides: "SPA routing between Welcome and Main"
      contains: "HashRouter"
    - path: "client/src/renderer/src/pages/Main.tsx"
      provides: "Discord-style triple-column layout"
      contains: "ServerRail"
    - path: "client/src/renderer/src/stores/index.ts"
      provides: "Zustand store composition"
      contains: "zustand"
    - path: "client/src/renderer/src/components/ConnectionDot.tsx"
      provides: "Always-visible connection status indicator"
      contains: "connectionStatus"
    - path: "client/src/renderer/src/components/ServerIcon.tsx"
      provides: "Server initials icon with derived color"
      contains: "initials"
  key_links:
    - from: "client/src/renderer/src/stores/index.ts"
      to: "client/src/preload"
      via: "calls window.united.*"
      pattern: "window.united"
    - from: "client/src/renderer/src/App.tsx"
      to: "client/src/renderer/src/stores"
      via: "reads auth state for routing"
      pattern: "useStore"
---

<objective>
Build the React app shell with Discord-style triple-column layout, Zustand store architecture with cached instant loading, and all UI components for the main application frame. Uses IPC stubs from Plan 01-04.

Purpose: Deliver the visible app experience — layout, navigation, and state management — that auth flows (Plan 01-06) will populate with real data.
Output: React UI with Welcome screen, Discord-style layout, Zustand stores, and all visual components.
</objective>

<execution_context>
@C:/Users/matts/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/matts/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-CONTEXT-CLIENT.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: React app shell with Discord-style layout and cached loading</name>
  <files>client/src/renderer/index.html, client/src/renderer/src/App.tsx, client/src/renderer/src/stores/auth.ts, client/src/renderer/src/stores/connection.ts, client/src/renderer/src/stores/server.ts, client/src/renderer/src/stores/channels.ts, client/src/renderer/src/stores/settings.ts, client/src/renderer/src/stores/ui.ts, client/src/renderer/src/stores/index.ts, client/src/renderer/src/pages/Welcome.tsx, client/src/renderer/src/pages/Main.tsx, client/src/renderer/src/components/ServerRail.tsx, client/src/renderer/src/components/ChannelSidebar.tsx, client/src/renderer/src/components/MainContent.tsx, client/src/renderer/src/components/ConnectionDot.tsx, client/src/renderer/src/components/ServerIcon.tsx, client/src/renderer/src/components/SkeletonShimmer.tsx</files>
  <action>
Implement App.tsx: SPA routing with HashRouter (not BrowserRouter — Electron file:// protocol pitfall from research). Routes: /welcome (auth screens), /app (main layout). Redirect to /welcome if not authenticated, /app if authenticated.

Implement Zustand stores (slice composition pattern): auth.ts (isUnlocked, fingerprint, publicKey, unlock/lock), connection.ts (status: connected/reconnecting/disconnected, serverUrl), server.ts (name, description, icon, registrationMode), channels.ts (list, activeChannelId), settings.ts (theme, displayName), ui.ts (activePanel, sidebarCollapsed). Compose into single store in stores/index.ts. Hydrate from local SQLite on app launch (cached loading for APP-01).

Implement pages/Main.tsx: Discord-style triple-column layout with CSS Grid or Flexbox. ServerRail (56px fixed left) | ChannelSidebar (240px left) | MainContent (fill remaining). Dark mode by default.

Implement components:
- ServerRail.tsx: Server icons, always visible even with 1 server.
- ChannelSidebar.tsx: Server name header (clickable for dropdown), channel list with #general default.
- MainContent.tsx: Welcome message showing server name + description (no chat in Phase 1).
- ConnectionDot.tsx: Always-visible colored dot (green/yellow/red) for connection status.
- ServerIcon.tsx: Letter initials from server name (first letter of each word, max 3 chars), colored circle with color derived from name hash.
- SkeletonShimmer.tsx: Shimmer loading pattern for first-launch-only fallback.

Implement pages/Welcome.tsx: Centered welcome screen with UNITED branding, two primary buttons: "Create new identity" and "Recover existing identity".

Style with Tailwind CSS (dark mode first, Vite compatible). Dark theme as default.
  </action>
  <verify>App launches, shows Welcome screen on first launch. After mock auth (via stub), shows triple-column layout with server rail, channel sidebar (#general), and main content (welcome message). Connection dot visible. Cached state loads instantly on subsequent launches. No white flash on launch. No CSP violations in DevTools.</verify>
  <done>React app shell renders correctly. Discord-style layout works. Cached loading verified. All components render with dark theme.</done>
</task>

</tasks>

<verification>
- Triple-column layout renders at 1280x720
- Welcome screen shows on first launch
- Cached state hydrates on subsequent launches
- Connection dot reflects mock status
- Server icon shows correct initials with colored circle
- No CSP violations in DevTools
</verification>

<success_criteria>
- Discord-style triple-column layout with dark theme renders correctly
- App shell loads instantly from cache on subsequent launches
- Zustand stores hydrate from SQLite cached state
- All visual components render with correct styling
</success_criteria>

<output>
Create `.planning/phases/01-foundation/01-05-SUMMARY.md` with accomplishments, commits, and metrics.
</output>
